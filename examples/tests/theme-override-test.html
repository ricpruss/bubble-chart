<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bubble Chart - Theme Override Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="../../dist/bubble-chart.min.js"></script>
  <style>
    body { 
      margin: 0; 
      background: #f8f9fa;
      font-family: Arial, sans-serif;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }
    .chart-row {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    .chart-container {
      flex: 1;
      min-width: 300px;
      height: 400px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      background: white;
      position: relative;
    }
    .chart-title {
      position: absolute;
      top: 10px;
      left: 10px;
      font-weight: bold;
      color: #333;
      z-index: 10;
      background: rgba(255,255,255,0.9);
      padding: 5px 10px;
      border-radius: 4px;
    }
    .status {
      padding: 15px;
      border-radius: 6px;
      font-weight: 500;
      text-align: center;
      margin: 10px 0;
    }
    .status.success {
      background: #e8f5e8;
      border: 1px solid #c8e6c9;
      color: #2e7d32;
    }
    .status.error {
      background: #ffebee;
      border: 1px solid #ffcdd2;
      color: #c62828;
    }
    .theme-info {
      margin: 20px 0;
      padding: 15px;
      background: #f0f7ff;
      border-radius: 6px;
      color: #1565c0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé® Theme Override Test</h1>
    
    <div class="status success" id="status">Testing explicit theme overrides...</div>
    
    <div class="theme-info">
      <strong>Override Tests:</strong><br>
      ‚Ä¢ Wave chart with Forest theme (should be green, not ocean)<br>
      ‚Ä¢ List chart with Sunset theme (should be orange/red, not slate)<br>
      ‚Ä¢ Standard bubble with Ocean theme (should be cyan, not corporate blue)
    </div>
    
    <!-- Row 1: Theme Overrides -->
    <div class="chart-row">
      <div class="chart-container">
        <div class="chart-title">Wave + Forest Override</div>
        <div id="wave-forest-chart"></div>
      </div>
      <div class="chart-container">
        <div class="chart-title">List + Sunset Override</div>
        <div id="list-sunset-chart"></div>
      </div>
      <div class="chart-container">
        <div class="chart-title">Bubble + Ocean Override</div>
        <div id="bubble-ocean-chart"></div>
      </div>
    </div>
  </div>

  <script>
    try {
      // Sample data with categories for color grouping
      const data = [
        { "label": "Technology", "size": 40, "category": "Tech" },
        { "label": "Healthcare", "size": 35, "category": "Health" },
        { "label": "Finance", "size": 30, "category": "Finance" },
        { "label": "Education", "size": 25, "category": "Education" },
        { "label": "Retail", "size": 20, "category": "Retail" }
      ];

      // Create charts with explicit theme overrides
      const overrideConfigs = [
        { id: "#wave-forest-chart", type: "wave", theme: "forest", title: "Wave + Forest" },
        { id: "#list-sunset-chart", type: "list", theme: "sunset", title: "List + Sunset" },
        { id: "#bubble-ocean-chart", type: "none", theme: "ocean", title: "Bubble + Ocean" }
      ];

      let successCount = 0;
      let errorCount = 0;

      overrideConfigs.forEach(config => {
        try {
          const chart = BubbleChart.create(config.id)
            .withData(data)
            .withLabel("label")
            .withSize("size")
            .withColor("category")
            .withType(config.type)
            .withTheme(config.theme)
            .withDimensions(280, 360)
            .withAnimations("gentle")
            .build();
          
          console.log(`‚úÖ ${config.title} created successfully with ${config.theme} theme`);
          successCount++;
        } catch (error) {
          console.error(`‚ùå Error creating ${config.title}:`, error);
          errorCount++;
        }
      });

      // Update status
      const statusEl = document.getElementById('status');
      if (errorCount === 0) {
        statusEl.innerHTML = `‚úÖ All ${successCount} theme overrides working correctly!`;
        statusEl.className = 'status success';
      } else {
        statusEl.innerHTML = `‚ö†Ô∏è ${successCount} succeeded, ${errorCount} failed`;
        statusEl.className = 'status error';
      }

    } catch (error) {
      console.error('‚ùå Error in theme override test:', error);
      const statusEl = document.getElementById('status');
      statusEl.innerHTML = '‚ùå Error: ' + error.message;
      statusEl.className = 'status error';
    }
  </script>

</body>
</html>
